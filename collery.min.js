document.write('<div class="gallery"> <div class="next"></div><div class="previous"></div></div><div class="title"></div><div class="close" title="Close (Esc)"> Close <div class="closex"> <div class="line1"></div><div class="line2"></div></div></div><div class="next"> <div class="arrow"></div></div><div class="previous"> <div class="arrow"></div></div><div class="cover"></div>');var index,totalIndex,scrolledY,scrolledX,imgTop,windowTop,imgLeft,windowLeft,imgWidth,imgHeight,showWidth,showHeight,showRatio,viewportWidth,viewportHeight,showMaxRatio,imgSrc,imgColor,imgTitle,total,open=!1;function getPosition(){scrolledX=(window.pageXOffset||window.scrollX)-(window.clientLeft||0),scrolledY=(window.pageYOffset||window.scrollTop)-(window.clientTop||0),isNaN(scrolledX)&&(scrolledX=0),isNaN(scrolledY)&&(scrolledY=0);var a=document.querySelectorAll('.collery')[window.totalIndex].getBoundingClientRect();imgTop=a.top+scrolledY,imgLeft=a.left+scrolledX,windowTop=imgTop-scrolledY,windowLeft=imgLeft-scrolledX,imgWidth=document.querySelectorAll('.collery')[window.totalIndex].clientWidth,imgHeight=document.querySelectorAll('.collery')[window.totalIndex].clientHeight,viewportWidth=window.clientWidth,viewportHeight=window.clientHeight}function loadImage(){imgSrc=document.querySelectorAll('.collery')[window.totalIndex].parentElement.getAttribute('href'),imgSrc==void 0&&(imgSrc=document.querySelectorAll('.collery')[window.totalIndex].getAttribute('src')),imgColor=document.querySelectorAll('.collery')[window.totalIndex].getAttribute('data-collery-color'),imgColor==void 0&&(imgColor='#000000'),showWidth=document.querySelectorAll('.collery')[window.totalIndex].getAttribute('data-collery-width'),showHeight=document.querySelectorAll('.collery')[window.totalIndex].getAttribute('data-collery-height'),imgTitle=document.querySelectorAll('.collery')[window.totalIndex].getAttribute('title'),document.querySelector('.gallery').style.backgroundImage='url('+imgSrc+')',document.querySelector('.cover').style.backgroundColor=imgColor,document.querySelector('.title').style.opacity='0',open||(document.querySelector('.close').style.opacity='0')}function scaleImage(){viewportWidth=document.documentElement.clientWidth,viewportHeight=document.documentElement.clientHeight,showWidth=parseInt(document.querySelectorAll('.collery')[window.totalIndex].getAttribute('data-collery-width')),showHeight=parseInt(document.querySelectorAll('.collery')[window.totalIndex].getAttribute('data-collery-height')),showRatio=showWidth/showHeight,showMaxRatio=(viewportWidth-120)/(viewportHeight-120),0==index?document.querySelector('.previous .arrow').classList.remove('active'):(document.querySelector('.previous .arrow').classList.add('active'),document.querySelectorAll('.previous')[0].setAttribute('title','Previous (Left)'),document.querySelectorAll('.previous')[1].setAttribute('title','Previous (Left)')),index==total?document.querySelector('.next .arrow').classList.remove('active'):(document.querySelector('.next .arrow').classList.add('active'),document.querySelectorAll('.next')[0].setAttribute('title','Next (Right)'),document.querySelectorAll('.next')[1].setAttribute('title','Next (Right)')),showMaxRatio<showRatio?showWidth>viewportWidth-120&&(showWidth=viewportWidth-120,showHeight=showWidth/showRatio):showHeight>viewportHeight-120&&(showHeight=viewportHeight-120,showWidth=showHeight*showRatio),document.querySelector('.gallery.zoom').style.width=showWidth+'px',document.querySelector('.gallery.zoom').style.height=showHeight+'px',document.querySelector('.gallery.zoom').style.left=(viewportWidth-showWidth)/2+'px',document.querySelector('.gallery.zoom').style.top=(viewportHeight-showHeight)/2+'px',document.querySelector('.title').style.top=(viewportHeight-showHeight)/2+showHeight+12+'px',document.querySelector('.close').style.top=(viewportHeight-showHeight)/2-48+'px',document.querySelector('.closex').style.top=(viewportHeight-showHeight)/2-48+'px',document.querySelector('.close').style.right=(viewportWidth-showWidth)/2+40+'px',document.querySelector('.closex').style.right=(viewportWidth-showWidth)/2-10+'px'}window.addEventListener('resize',function(){!0==open&&scaleImage()}),window.addEventListener('wheel',function(a){!0==open&&a.preventDefault()});function textLoad(){document.querySelector('.title').style.opacity='0',document.querySelector('.title').style.transform='translateY(0)',document.querySelector('.title').style.transition='none',setTimeout(function(){textColor(),document.querySelector('.title').style.opacity='0',document.querySelector('.title').style.transform='translateY(1rem)',document.querySelector('.title').style.transition='all 0.3s ease-out'},1),setTimeout(function(){document.querySelector('.title').innerHTML=imgTitle,document.querySelector('.title').style.transform='translateY(0)',document.querySelector('.title').style.opacity='1',document.querySelector('.close').style.opacity='1'},300)}function showImage(){document.querySelector('.gallery').style.top=windowTop+'px',document.querySelector('.gallery').style.left=windowLeft+'px',document.querySelector('.gallery').style.width=imgWidth+'px',document.querySelector('.gallery').style.height=imgHeight+'px',document.querySelector('.gallery').style.display='block',document.querySelector('.cover').style.display='block',document.querySelectorAll('.next')[0].style.display='block',document.querySelectorAll('.next')[1].style.display='block',document.querySelectorAll('.previous')[0].style.display='block',document.querySelectorAll('.previous')[1].style.display='block',document.querySelector('.close').style.display='block',document.querySelector('.title').style.display='block',setTimeout(function(){document.querySelector('.gallery').classList.add('zoom'),document.querySelector('.cover').classList.add('zoom'),document.querySelector('.title').classList.add('zoom'),document.querySelector('.close').classList.add('zoom'),document.querySelector('.container').classList.add('zoom'),textLoad(),scaleImage()},1)}function hexToRgb(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}function textColor(){160<(299*hexToRgb(imgColor).r+587*hexToRgb(imgColor).g+114*hexToRgb(imgColor).b)/1e3?(document.querySelector('.title').style.color='#000',document.querySelector('.close').style.color='#000',document.querySelector('.closex .line1').style.backgroundColor='#000',document.querySelector('.closex .line2').style.backgroundColor='#000',document.querySelector('.previous .arrow').style.borderRight='1.25rem solid #000',document.querySelector('.next .arrow').style.borderLeft='1.25rem solid #000'):(document.querySelector('.title').style.color='#fff',document.querySelector('.close').style.color='#fff',document.querySelector('.closex .line1').style.backgroundColor='#fff',document.querySelector('.closex .line2').style.backgroundColor='#fff',document.querySelector('.previous .arrow').style.borderRight='1.25rem solid #fff',document.querySelector('.next .arrow').style.borderLeft='1.25rem solid #fff')}function getIndex(a){for(var b=document.querySelectorAll('.collery-container.selected .collery'),c=-1,d=0;d<b.length;d++)a==b[d]&&(c=d);return c}document.addEventListener('DOMContentLoaded',function(){function b(){open=!1,document.querySelector('.collery-container.selected')&&document.querySelector('.collery-container.selected').classList.remove('selected'),getPosition(),setTimeout(function(){document.querySelector('.gallery').classList.remove('zoom'),document.querySelector('.cover').classList.remove('zoom'),document.querySelector('.title').classList.remove('zoom'),document.querySelector('.close').classList.remove('zoom'),document.querySelector('.container').classList.remove('zoom'),document.querySelector('.gallery').style.top=windowTop+'px',document.querySelector('.gallery').style.left=windowLeft+'px',document.querySelector('.gallery').style.width=imgWidth+'px',document.querySelector('.gallery').style.height=imgHeight+'px'},1),setTimeout(function(){document.querySelector('.gallery').style.display='none',document.querySelector('.close').style.display='none',document.querySelectorAll('.next')[0].style.display='none',document.querySelectorAll('.next')[1].style.display='none',document.querySelectorAll('.previous')[0].style.display='none',document.querySelectorAll('.previous')[1].style.display='none',document.querySelector('.cover').style.display='none',document.querySelector('.title').style.display='none'},300)}function c(){return 0!=index&&void(totalIndex--,index--,loadImage(),showImage(),textLoad())}function d(){return index!=total&&(totalIndex++,index++,loadImage(),showImage(),textLoad(),!1)}for(var f=document.querySelectorAll('.collery'),g=0;g<f.length;g++)f[g].addEventListener('click',function(h){h.preventDefault();for(var j=document.querySelectorAll('.collery'),k=0;k<j.length;k++)this==j[k]&&(window.totalIndex=k);this.closest('.collery-container')&&this.closest('.collery-container').classList.add('selected'),window.total=document.querySelectorAll('.collery-container.selected a img.collery').length-1,index=getIndex(this),(-1==window.total||isNaN(window.total))&&(total=0,index=0),getPosition(),loadImage(),textColor(),showImage(),open=!0},!1);document.querySelector('.cover').addEventListener('click',function(){return b(),!1}),document.querySelectorAll('.previous')[0].addEventListener('click',function(){return c(),!1}),document.querySelectorAll('.previous')[1].addEventListener('click',function(){return c(),!1}),document.querySelectorAll('.next')[0].addEventListener('click',function(){return d(),!1}),document.querySelectorAll('.next')[1].addEventListener('click',function(){return d(),!1}),document.querySelector('.close').addEventListener('click',function(){return b(),!1}),window.addEventListener('keydown',function(h){if(!0==open){if(37==h.keyCode)return c(),!1;if(39==h.keyCode)d();else if(27==h.keyCode)b();else if(13==h.keyCode)return d(),!1}})});