/* Collery created by Rafael Fernandez (rafaeldesign.be) */var index,totalIndex,imgTop,windowTop,imgLeft,windowLeft,imgWidth,imgHeight,showWidth,showHeight,showRatio,viewportWidth,viewportHeight,showMaxRatio,imgSrc,imgColor,imgTitle,total;document.write('<div class="gallery"> <div class="next"></div><div class="previous"></div></div><div class="title"></div><div class="close" title="Close (Esc)"> Close <div class="closex"> <div class="line1"></div><div class="line2"></div></div></div><div class="next"> <div class="arrow"></div></div><div class="previous"> <div class="arrow"></div></div><div class="cover"></div>');var open=!1;function getPosition(){imgTop=$(".collery").eq(window.totalIndex).offset().top,windowTop=imgTop-$(window).scrollTop(),imgLeft=$(".collery").eq(window.totalIndex).offset().left,windowLeft=imgLeft-$(window).scrollLeft(),imgWidth=$(".collery").eq(window.totalIndex).width(),imgHeight=$(".collery").eq(window.totalIndex).height(),viewportWidth=$(window).width(),viewportHeight=$(window).height()}function loadImage(){null==(imgSrc=$(".collery").eq(window.totalIndex).parent().attr("href"))&&(imgSrc=$(".collery").eq(window.totalIndex).attr("src")),null==(imgColor=$(".collery").eq(window.totalIndex).data("collery-color"))&&(imgColor="#000000"),showWidth=$(".collery").eq(window.totalIndex).data("collery-width"),showHeight=$(".collery").eq(window.totalIndex).data("collery-height"),imgTitle=$(".collery").eq(window.totalIndex).attr("title"),$(".gallery").css("background-image","url("+imgSrc+")"),$(".cover").css("background-color",imgColor),$(".title").css("opacity","0")}function scaleImage(){viewportWidth=$(window).width(),viewportHeight=$(window).height(),showWidth=$(".collery").eq(window.totalIndex).data("collery-width"),showHeight=$(".collery").eq(window.totalIndex).data("collery-height"),showRatio=showWidth/showHeight,showMaxRatio=(viewportWidth-120)/(viewportHeight-120),0==index?$(".previous .arrow").removeClass("active"):($(".previous .arrow").addClass("active"),$(".previous").attr("title","Previous (Left)")),index==total?$(".next .arrow").removeClass("active"):($(".next .arrow").addClass("active"),$(".next").attr("title","Next (Right)")),showMaxRatio<showRatio?showWidth>viewportWidth-120&&(showHeight=(showWidth=viewportWidth-120)/showRatio):showHeight>viewportHeight-120&&(showWidth=(showHeight=viewportHeight-120)*showRatio),$(".gallery.zoom").css("width",showWidth+"px"),$(".gallery.zoom").css("height",showHeight+"px"),$(".gallery.zoom").css("left",(viewportWidth-showWidth)/2+"px"),$(".gallery.zoom").css("top",(viewportHeight-showHeight)/2+"px"),$(".title").css("top",(viewportHeight-showHeight)/2+showHeight+"px"),$(".close, .closex").css("top",(viewportHeight-showHeight)/2-48+"px"),$(".close").css("right",(viewportWidth-showWidth)/2+56+"px"),$(".closex").css("right",(viewportWidth-showWidth)/2+"px")}function textLoad(){$(".title").css("opacity","0"),$(".title").css("transform","translateY(0)"),$(".title").css("transition","none"),setTimeout(function(){textColor(),$(".title").css("opacity","0"),$(".title").css("transform","translateY(1rem)"),$(".title").css("transition","all 0.3s ease-out")},1),setTimeout(function(){$(".title").html(imgTitle),$(".title").css("transform","translateY(0)"),$(".title").css("opacity","1")},300)}function showImage(){$(".gallery").css("top",windowTop+"px"),$(".gallery").css("left",windowLeft+"px"),$(".gallery").css("width",imgWidth+"px"),$(".gallery").css("height",imgHeight+"px"),$(".gallery").css("display","block"),$(".cover").css("display","block"),$(".next").css("display","block"),$(".previous").css("display","block"),$(".close").css("display","block"),$(".title").css("display","block"),setTimeout(function(){$(".gallery").addClass("zoom"),$(".cover").addClass("zoom"),$(".title").addClass("zoom"),$(".close").addClass("zoom"),$(".container").addClass("zoom"),textLoad(),scaleImage()},1)}function hexToRgb(o){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function textColor(){(299*hexToRgb(imgColor).r+587*hexToRgb(imgColor).g+114*hexToRgb(imgColor).b)/1e3>160?($(".title").css("color","#000"),$(".close").css("color","#000"),$(".closex .line1, .closex .line2").css("background-color","#000"),$(".previous .arrow").css("border-right","1.25rem solid #000"),$(".next .arrow").css("border-left","1.25rem solid #000")):($(".title").css("color","#fff"),$(".close").css("color","#fff"),$(".closex .line1, .closex .line2").css("background-color","#fff"),$(".previous .arrow").css("border-right","1.25rem solid #fff"),$(".next .arrow").css("border-left","1.25rem solid #fff"))}$(window).on("resize",function(){scaleImage()}),$(document).ready(function(){function o(){open=!1,$(".collery-container").removeClass("selected"),getPosition(),setTimeout(function(){$(".gallery").removeClass("zoom"),$(".cover").removeClass("zoom"),$(".title").removeClass("zoom"),$(".close").removeClass("zoom"),$(".container").removeClass("zoom"),$(".gallery").css("top",windowTop+"px"),$(".gallery").css("left",windowLeft+"px"),$(".gallery").css("width",imgWidth+"px"),$(".gallery").css("height",imgHeight+"px")},1),setTimeout(function(){$(".gallery").css("display","none"),$(".close").css("display","none"),$(".next").css("display","none"),$(".previous").css("display","none"),$(".cover").css("display","none"),$(".title").css("display","none")},300)}function e(){if(0==index)return!1;totalIndex--,index--,loadImage(),showImage(),textLoad()}function t(){return index!=total&&(totalIndex++,index++,loadImage(),showImage(),textLoad(),!1)}$(".collery").click(function(o){return $(this).closest(".collery-container").addClass("selected"),total=$(".collery-container.selected a img.collery").length-1,totalIndex=$(this).index(".collery"),index=$(this).index(".collery-container.selected a img.collery"),-1==total&&(total=0,index=0),getPosition(),loadImage(),textColor(),$(".title").html(imgTitle),showImage(),open=!0,!1}),$(".cover").click(function(e){return o(),!1}),$(".previous").click(function(o){return e(),!1}),$(".next").click(function(o){t()}),$(".close").click(function(e){return o(),!1}),$("body").keydown(function(i){if(1==open){if(37==i.keyCode)return e(),!1;if(39==i.keyCode)t();else if(27==i.keyCode)o();else if(13==i.keyCode)return t(),!1}})});